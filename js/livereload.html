<script>
(async() => {
    console.warn("Activated brace livereload...")
    const BRACE_LIVERELOAD_OFFSET_KEY = "__braceLiverealoadOffsetKey";
    const scrollTop = sessionStorage.getItem(BRACE_LIVERELOAD_OFFSET_KEY);
    window.addEventListener("DOMContentLoaded", () => {
        window.setTimeout(() => {
            document.documentElement.scrollTop =  parseInt(scrollTop);
        }, 100);
    })
    document.addEventListener("scroll", (e)=> {
        sessionStorage.setItem(BRACE_LIVERELOAD_OFFSET_KEY, window.scrollY);
    });

    let result = await fetch(window.location.href + "?__brace_inotify_wait");
    if ( ! result.ok) {
        console.log("Brace SPA: LiveReload error:" + result.text());
        return;
    }
    window.location.reload();
})();
</script>





